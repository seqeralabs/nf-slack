/*
 * EXAMPLE 2: Notification Control - Choose When to Notify
 *
 * Control which workflow events trigger Slack notifications.
 * All other settings remain at defaults.
 *
 * New features in this example:
 * - onStart.enabled: control start notifications
 * - onComplete.enabled: control completion notifications
 * - onError.enabled: control error notifications
 */

plugins {
    id 'nf-slack@0.3.0'
}

slack {
    // Option A: Bot User
    bot {
        token = System.getenv('SLACK_BOT_TOKEN')
        channel = System.getenv('SLACK_CHANNEL_ID')
    }

    // Option B: Webhook
    // webhook {
    //     url = System.getenv('SLACK_WEBHOOK_URL')
    // }

    // Control which events trigger notifications
    onStart {
        enabled = false      // Don't notify when workflow starts
    }

    onComplete {
        enabled = true       // DO notify when workflow completes
    }

    onError {
        enabled = true       // DO notify when workflow fails
    }
}

// Use case: Reduce notification noise by only showing results and errors
