plugins {
    id 'nf-slack@0.4.1'
}

slack {
    enabled = true
    bot {
        token = System.getenv("SLACK_BOT_TOKEN")
        channel = System.getenv("SLACK_CHANNEL_ID")
    }

    onStart {
        message = [
            text: 'üöÄ *Pipeline Starting*',
            color: '#3AA3E3',
            customFields: [
                [title: 'Priority', value: 'High', short: true],
                [title: 'Team', value: 'Bioinformatics', short: true],
                [title: 'Notes', value: 'Scheduled run for weekly analysis']
            ]
        ]
        showFooter = false
    }

    onComplete {
        message = [
            text: '‚úÖ *Pipeline Complete*',
            color: '#2EB887',
            customFields: [
                [title: 'Status', value: 'All samples processed', short: true],
                [title: 'Quality', value: 'PASS', short: true]
            ]
        ]
        showFooter = false
    }

    onError {
        message = [
            text: '‚ùå *Pipeline Failed*',
            color: '#A30200',
            customFields: [
                [title: 'Support Contact', value: '#help-pipelines', short: true],
                [title: 'Action', value: 'Check logs and retry', short: true]
            ]
        ]
        showFooter = false
    }
    useThreads = false
}
