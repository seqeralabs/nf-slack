/*
 * EXAMPLE 4: Custom Messages
 *
 * Customize message text using map-based configuration.
 * This introduces the advanced message format using maps instead of strings.
 *
 * New features in this example:
 * - Map-based message configuration
 * - text: message text (same as string format)
 */

plugins {
    id 'nf-slack@0.3.0'
}

slack {
    // Option A: Bot User
    bot {
        token = System.getenv('SLACK_BOT_TOKEN')
        channel = System.getenv('SLACK_CHANNEL_ID')
    }

    // Option B: Webhook
    // webhook {
    //     url = System.getenv('SLACK_WEBHOOK_URL')
    // }

    // Map-based configuration for start message
    onStart {
        enabled = true
        message = [
            text: 'ğŸš€ *Pipeline started*'
        ]
    }

    // Map-based configuration for completion message
    onComplete {
        enabled = true
        message = [
            text: 'âœ… *Pipeline completed*'
        ]
    }

    // Map-based configuration for error message
    onError {
        enabled = true
        message = [
            text: 'âŒ *Pipeline failed*'
        ]
    }
}

// When you use a map, you can specify:
// - text: the message text
//
// Default messages (if not specified):
// - Start: 'ğŸš€ *Pipeline started*'
// - Complete: 'âœ… *Pipeline completed successfully*'
// - Error: 'âŒ *Pipeline failed*'
